{"version":3,"sources":["webpack:///./settings/index.js","webpack:///./apiService.js","webpack:///./index.js","webpack:///./templates/card-template.hbs"],"names":["settings","BASE_URL","key","ApiService","this","searchQuery","page","fetchPhotos","url","pageNumber","fetch","incrementPage","resetPage","getImages","response","json","result","hits","console","log","newQuery","refs","form","document","querySelector","input","gallery","submitButton","pageBottom","apiService","IntersectionObserver","entries","forEach","entry","isIntersecting","children","length","then","items","insertAdjacentHTML","cardTemplate","observe","addEventListener","e","preventDefault","currentTarget","elements","query","value","trim","split","join","innerHTML","alert","text","delay","sticker","stack","Stack","dir1","dir2","firstpos1","firstpos2","event","target","nodeName","bigImageURL","getAttribute","basicLightbox","show","Handlebars","module","exports","template","container","depth0","helpers","partials","data","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop"],"mappings":"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","file":"main.026a4a72c63c9857e515.js","sourcesContent":["const settings = {\r\n    BASE_URL: 'https://pixabay.com/api',\r\n    key: '20701494-a6ebf8a672042d83fc6e30e69'\r\n}\r\nexport default settings;","import settings from './settings';\r\nconst { BASE_URL, key } = settings;\r\n\r\nexport default class ApiService {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n  fetchPhotos() {\r\n    const url = `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.pageNumber}&per_page=12&key=${key}`;\r\n    return fetch(url);\r\n  }\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n  async getImages(searchQuery) {\r\n    try {\r\n      this.incrementPage();\r\n      const response = await this.fetchPhotos();\r\n      const result = await response.json();\r\n      return result.hits;\r\n    } catch (err) {\r\n      console.log(err);\r\n      throw err;\r\n    }\r\n  }\r\n}\r\n","import './styles.css';\nimport ApiService from './apiService';\nimport cardTemplate from './templates/card-template.hbs';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport { Stack, alert, error } from '@pnotify/core';\nimport * as basicLightbox from 'basiclightbox';\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  input: document.querySelector('.input'),\n  gallery: document.querySelector('.gallery'),\n  submitButton: document.querySelector('.submit-button'),\n  pageBottom: document.querySelector('.pageBottom'),\n};\n\nconst apiService = new ApiService();\n\nfunction clearContent() {\n  refs.gallery.innerHTML = '';\n}\n\nfunction onSearch(e) {\n  e.preventDefault();\n  apiService.searchQuery = e.currentTarget.elements.query.value\n    .trim()\n    .split(' ')\n    .join('+');\n  clearContent();\n\n  apiService.resetPage();\n\n  if (apiService.searchQuery === '') {\n    return alert({\n      text: 'Please enter valid name',\n      delay: 1000,\n      sticker: false,\n      stack: new Stack({\n        dir1: 'up',\n        dir2: 'right',\n        firstpos1: 30,\n        firstpos2: 30,\n      }),\n    });\n  }\n\n  apiService.getImages().then(items => {\n    refs.gallery.insertAdjacentHTML('beforeend', cardTemplate(items));\n  });\n}\n\nlet observer = new IntersectionObserver(entries => {\n  entries.forEach(entry => {\n    if (\n      apiService.searchQuery !== '' &&\n      entry.isIntersecting &&\n      refs.gallery.children.length > 0\n    )\n      apiService\n        .getImages()\n        .then(items =>\n          refs.gallery.insertAdjacentHTML('beforeend', cardTemplate(items)),\n        );\n  });\n});\nobserver.observe(refs.pageBottom);\n\nrefs.form.addEventListener('submit', onSearch);\n\n// lightbox\nrefs.gallery.addEventListener('click', getBigImage);\n\nfunction getBigImage(event) {\n  const target = event.target;\n  if (target.nodeName !== 'IMG') return;\n  const bigImageURL = event.target.getAttribute('data-src');\n  const instance = basicLightbox.create(`\n  <img src=\"${bigImageURL}\" width=\"800\" height=\"600\">\n`);\n  instance.show();\n}\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li>\\r\\n  <div class=\\\"photo-card\\\">\\r\\n    <img class=\\\"image\\\" loading=\\\"lazy\\\" width=\\\"100%\\\" src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\\\"\\r\\n      data-src=\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0), depth0))\n    + \"\\\" />\\r\\n    <div class=\\\"stats\\\">\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">visibility</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">comment</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n      </p>\\r\\n    </div>\\r\\n  </div>\\r\\n</li>\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":25,\"column\":14}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}